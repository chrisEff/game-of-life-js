<html>
	<head>
		<script>
			function convert(input) {
				let width = 0
				let result = []
				input.replace("\n", "").split('$').forEach(l => {
					const chars = l.split('')

					let num = ''
					const row = []
					while (chars.length) {
						const char = chars.shift()
						if (char === 'b' || char === 'o') {
							if (num === '') num = 1
							for (let i = 0; i < parseInt(num); i++) {
								row.push(char === 'o' ? 1 : 0)
							}
							num = ''
						} else {
							num += char
						}
					}
					result.push(row)

					if (num !== '') {
						for (let i = 1; i < parseInt(num); i++) {
							result.push([0])
						}
					}

					width = Math.max(width, row.length)
				})

				console.log('width:', width)

				result = result.map(l => {
					const oldLength = l.length
					l.length = width
					return l.fill(0, oldLength)
				})

				return JSON.stringify(result)
					.replace(/],/g, '],\n')
					.replace('[[', '[\n[')
					.replace(']]', ']\n]')
			}
		</script>
	</head>
	<body>
		<center>
			<label for="in">insert an RLE pattern:</label><br/>
			<textarea id="in" cols="200" rows="15"></textarea><br/><br/>

			<label for="out">JSON output:</label><br/>
			<textarea id="out" cols="200" rows="15" disabled></textarea><br/><br/>

			<button onClick="document.getElementById('out').value = convert(document.getElementById('in').value)">convert</button>
		</center>
	</body>
</html>
